!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@wonderlandlabs/propper")):"function"==typeof define&&define.amd?define(["@wonderlandlabs/propper"],r):(t=t||self).LGE=r(t.propper)}(this,(function(t){"use strict";var r={ES3:{break:!0,continue:!0,delete:!0,else:!0,for:!0,function:!0,if:!0,in:!0,new:!0,return:!0,this:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,case:!0,catch:!0,default:!0,do:!0,finally:!0,instanceof:!0,switch:!0,throw:!0,try:!0},ESnext:{await:!0,debugger:!0,class:!0,enum:!0,extends:!0,super:!0,const:!0,export:!0,import:!0,null:!0,true:!0,false:!0,implements:!0,let:!0,private:!0,public:!0,yield:!0,interface:!0,package:!0,protected:!0,static:!0}};var e=function(t,e){e&&(t+=" "+function(t){let r=0;for(let e=0;e<t.length;++e){r=(r<<5)-r+t.charCodeAt(e),r|=0}return r}(t).toString(36));const n=t.trim().replace(/\W+/g,"_");return r.ES3[n]||r.ESnext[n]||/^\d/.test(n)?"_"+n:n},n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function i(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function o(t){return"function"==typeof t}var s=!1,u={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function a(t){setTimeout((function(){throw t}),0)}var c={closed:!0,next:function(t){},error:function(t){if(u.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},h=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var l=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),f=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e,n=this._parentOrParents,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u){n[u].remove(this)}if(o(i))try{i.call(this)}catch(t){r=t instanceof l?p(t.errors):[t]}if(h(s)){u=-1;for(var a=s.length;++u<a;){var c=s[u];if(null!==(e=c)&&"object"==typeof e)try{c.unsubscribe()}catch(t){r=r||[],t instanceof l?r=r.concat(p(t.errors)):r.push(t)}}}if(r)throw new l(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var i=e._parentOrParents;if(null===i)e._parentOrParents=this;else if(i instanceof t){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function p(t){return t.reduce((function(t,r){return t.concat(r instanceof l?r.errors:r)}),[])}var b=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),d=function(t){function r(e,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=c;break;case 1:if(!e){o.destination=c;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new y(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new y(o,e,n,i)}return o}return i(r,t),r.prototype[b]=function(){return this},r.create=function(t,e,n){var i=new r(t,e,n);return i.syncErrorThrowable=!1,i},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(f),y=function(t){function r(r,e,n,i){var s,u=t.call(this)||this;u._parentSubscriber=r;var a=u;return o(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==c&&(o((a=Object.create(e)).unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=s,u._error=n,u._complete=i,u}return i(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;u.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=u.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;a(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};u.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),u.useDeprecatedSynchronousErrorHandling)throw t;a(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!u.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return u.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(a(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(d);var _=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function v(t){return t}function g(t){return 0===t.length?v:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var m=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,i=function(t,r,e){if(t){if(t instanceof d)return t;if(t[b])return t[b]()}return t||r||e?new d(t,r,e):new d(c)}(t,r,e);if(n?i.add(n.call(i,this.source)):i.add(this.source||u.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),u.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){u.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,i=r.isStopped;if(e||i)return!1;t=n&&n instanceof d?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=w(r))((function(r,n){var i;i=e.subscribe((function(r){try{t(r)}catch(t){n(t),i&&i.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[_]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:g(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=w(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function w(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var S=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),E=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return i(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(f),j=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return i(r,t),r}(d),T=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return i(r,t),r.prototype[b]=function(){return new j(this)},r.prototype.lift=function(t){var r=new O(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new S;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].next(t)},r.prototype.error=function(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new S;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new S;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),f.EMPTY):this.isStopped?(t.complete(),f.EMPTY):(this.observers.push(t),new E(this,t))},r.prototype.asObservable=function(){var t=new m;return t.source=this,t},r.create=function(t,r){return new O(t,r)},r}(m),O=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return i(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):f.EMPTY},r}(T),x=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return i(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(T);var P=function(){function t(){}return t.prototype.call=function(t,r){return r.subscribe(new $(t))},t}(),$=function(t){function r(r){var e=t.call(this,r)||this;return e.hasPrev=!1,e}return i(r,t),r.prototype._next=function(t){var r;this.hasPrev?r=[this.prev,t]:this.hasPrev=!0,this.prev=t,r&&this.destination.next(r)},r}(d);var z,N,A=function(t){return t},k=Object.prototype,C=k.hasOwnProperty,q=k.toString;
/**!
   * is
   * the definitive JavaScript type testing library
   *
   * @copyright 2013-2014 Enrico Marino / Jordan Harband
   * @license MIT
   */"function"==typeof Symbol&&(z=Symbol.prototype.valueOf),"function"==typeof BigInt&&(N=BigInt.prototype.valueOf);var D=function(t){return t!=t},H={boolean:1,number:1,string:1,undefined:1},M=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,V=/^[A-Fa-f0-9]+$/,F={};F.a=F.type=function(t,r){return typeof t===r},F.defined=function(t){return void 0!==t},F.empty=function(t){var r,e=q.call(t);if("[object Array]"===e||"[object Arguments]"===e||"[object String]"===e)return 0===t.length;if("[object Object]"===e){for(r in t)if(C.call(t,r))return!1;return!0}return!t},F.equal=function(t,r){if(t===r)return!0;var e,n=q.call(t);if(n!==q.call(r))return!1;if("[object Object]"===n){for(e in t)if(!(F.equal(t[e],r[e])&&e in r))return!1;for(e in r)if(!(F.equal(t[e],r[e])&&e in t))return!1;return!0}if("[object Array]"===n){if((e=t.length)!==r.length)return!1;for(;e--;)if(!F.equal(t[e],r[e]))return!1;return!0}return"[object Function]"===n?t.prototype===r.prototype:"[object Date]"===n&&t.getTime()===r.getTime()},F.hosted=function(t,r){var e=typeof r[t];return"object"===e?!!r[t]:!H[e]},F.instance=F.instanceof=function(t,r){return t instanceof r},F.nil=F.null=function(t){return null===t},F.undef=F.undefined=function(t){return void 0===t},F.args=F.arguments=function(t){var r="[object Arguments]"===q.call(t),e=!F.array(t)&&F.arraylike(t)&&F.object(t)&&F.fn(t.callee);return r||e},F.array=Array.isArray||function(t){return"[object Array]"===q.call(t)},F.args.empty=function(t){return F.args(t)&&0===t.length},F.array.empty=function(t){return F.array(t)&&0===t.length},F.arraylike=function(t){return!!t&&!F.bool(t)&&C.call(t,"length")&&isFinite(t.length)&&F.number(t.length)&&t.length>=0},F.bool=F.boolean=function(t){return"[object Boolean]"===q.call(t)},F.false=function(t){return F.bool(t)&&!1===Boolean(Number(t))},F.true=function(t){return F.bool(t)&&!0===Boolean(Number(t))},F.date=function(t){return"[object Date]"===q.call(t)},F.date.valid=function(t){return F.date(t)&&!isNaN(Number(t))},F.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},F.error=function(t){return"[object Error]"===q.call(t)},F.fn=F.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var r=q.call(t);return"[object Function]"===r||"[object GeneratorFunction]"===r||"[object AsyncFunction]"===r},F.number=function(t){return"[object Number]"===q.call(t)},F.infinite=function(t){return t===1/0||t===-1/0},F.decimal=function(t){return F.number(t)&&!D(t)&&!F.infinite(t)&&t%1!=0},F.divisibleBy=function(t,r){var e=F.infinite(t),n=F.infinite(r),i=F.number(t)&&!D(t)&&F.number(r)&&!D(r)&&0!==r;return e||n||i&&t%r==0},F.integer=F.int=function(t){return F.number(t)&&!D(t)&&t%1==0},F.maximum=function(t,r){if(D(t))throw new TypeError("NaN is not a valid value");if(!F.arraylike(r))throw new TypeError("second argument must be array-like");for(var e=r.length;--e>=0;)if(t<r[e])return!1;return!0},F.minimum=function(t,r){if(D(t))throw new TypeError("NaN is not a valid value");if(!F.arraylike(r))throw new TypeError("second argument must be array-like");for(var e=r.length;--e>=0;)if(t>r[e])return!1;return!0},F.nan=function(t){return!F.number(t)||t!=t},F.even=function(t){return F.infinite(t)||F.number(t)&&t==t&&t%2==0},F.odd=function(t){return F.infinite(t)||F.number(t)&&t==t&&t%2!=0},F.ge=function(t,r){if(D(t)||D(r))throw new TypeError("NaN is not a valid value");return!F.infinite(t)&&!F.infinite(r)&&t>=r},F.gt=function(t,r){if(D(t)||D(r))throw new TypeError("NaN is not a valid value");return!F.infinite(t)&&!F.infinite(r)&&t>r},F.le=function(t,r){if(D(t)||D(r))throw new TypeError("NaN is not a valid value");return!F.infinite(t)&&!F.infinite(r)&&t<=r},F.lt=function(t,r){if(D(t)||D(r))throw new TypeError("NaN is not a valid value");return!F.infinite(t)&&!F.infinite(r)&&t<r},F.within=function(t,r,e){if(D(t)||D(r)||D(e))throw new TypeError("NaN is not a valid value");if(!F.number(t)||!F.number(r)||!F.number(e))throw new TypeError("all arguments must be numbers");return F.infinite(t)||F.infinite(r)||F.infinite(e)||t>=r&&t<=e},F.object=function(t){return"[object Object]"===q.call(t)},F.primitive=function(t){return!t||!("object"==typeof t||F.object(t)||F.fn(t)||F.array(t))},F.hash=function(t){return F.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},F.regexp=function(t){return"[object RegExp]"===q.call(t)},F.string=function(t){return"[object String]"===q.call(t)},F.base64=function(t){return F.string(t)&&(!t.length||M.test(t))},F.hex=function(t){return F.string(t)&&(!t.length||V.test(t))},F.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===q.call(t)&&"symbol"==typeof z.call(t)},F.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===q.call(t)&&"bigint"==typeof N.call(t)};var B=F;const U=Symbol("ABSENT"),I=t=>t!==U&&void 0!==t,R=t=>t!==U;function Y(t,r="invalid ValueStream name"){if(!t||!I(t)||!B.string(t)&&!B.number(t)){const e=new Error(r);throw R(t)?e.name=t:e.name=void 0,e}}var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},G="object"==typeof Z&&Z&&Z.Object===Object&&Z,L="object"==typeof self&&self&&self.Object===Object&&self,W=G||L||Function("return this")(),J=W.Symbol,K=Object.prototype,Q=K.hasOwnProperty,X=K.toString,tt=J?J.toStringTag:void 0;var rt=function(t){var r=Q.call(t,tt),e=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var i=X.call(t);return n&&(r?t[tt]=e:delete t[tt]),i},et=Object.prototype.toString;var nt=function(t){return et.call(t)},it="[object Null]",ot="[object Undefined]",st=J?J.toStringTag:void 0;var ut=function(t){return null==t?void 0===t?ot:it:st&&st in Object(t)?rt(t):nt(t)};var at=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},ct="[object AsyncFunction]",ht="[object Function]",lt="[object GeneratorFunction]",ft="[object Proxy]";var pt,bt=function(t){if(!at(t))return!1;var r=ut(t);return r==ht||r==lt||r==ct||r==ft},dt=W["__core-js_shared__"],yt=(pt=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||""))?"Symbol(src)_1."+pt:"";var _t=function(t){return!!yt&&yt in t},vt=Function.prototype.toString;var gt=function(t){if(null!=t){try{return vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},mt=/^\[object .+?Constructor\]$/,wt=Function.prototype,St=Object.prototype,Et=wt.toString,jt=St.hasOwnProperty,Tt=RegExp("^"+Et.call(jt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ot=function(t){return!(!at(t)||_t(t))&&(bt(t)?Tt:mt).test(gt(t))};var xt=function(t,r){return null==t?void 0:t[r]};var Pt=function(t,r){var e=xt(t,r);return Ot(e)?e:void 0},$t=Pt(Object,"create");var zt=function(){this.__data__=$t?$t(null):{},this.size=0};var Nt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},At="__lodash_hash_undefined__",kt=Object.prototype.hasOwnProperty;var Ct=function(t){var r=this.__data__;if($t){var e=r[t];return e===At?void 0:e}return kt.call(r,t)?r[t]:void 0},qt=Object.prototype.hasOwnProperty;var Dt=function(t){var r=this.__data__;return $t?void 0!==r[t]:qt.call(r,t)},Ht="__lodash_hash_undefined__";var Mt=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=$t&&void 0===r?Ht:r,this};function Vt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Vt.prototype.clear=zt,Vt.prototype.delete=Nt,Vt.prototype.get=Ct,Vt.prototype.has=Dt,Vt.prototype.set=Mt;var Ft=Vt;var Bt=function(){this.__data__=[],this.size=0};var Ut=function(t,r){return t===r||t!=t&&r!=r};var It=function(t,r){for(var e=t.length;e--;)if(Ut(t[e][0],r))return e;return-1},Rt=Array.prototype.splice;var Yt=function(t){var r=this.__data__,e=It(r,t);return!(e<0)&&(e==r.length-1?r.pop():Rt.call(r,e,1),--this.size,!0)};var Zt=function(t){var r=this.__data__,e=It(r,t);return e<0?void 0:r[e][1]};var Gt=function(t){return It(this.__data__,t)>-1};var Lt=function(t,r){var e=this.__data__,n=It(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function Wt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Wt.prototype.clear=Bt,Wt.prototype.delete=Yt,Wt.prototype.get=Zt,Wt.prototype.has=Gt,Wt.prototype.set=Lt;var Jt=Wt,Kt=Pt(W,"Map");var Qt=function(){this.size=0,this.__data__={hash:new Ft,map:new(Kt||Jt),string:new Ft}};var Xt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var tr=function(t,r){var e=t.__data__;return Xt(r)?e["string"==typeof r?"string":"hash"]:e.map};var rr=function(t){var r=tr(this,t).delete(t);return this.size-=r?1:0,r};var er=function(t){return tr(this,t).get(t)};var nr=function(t){return tr(this,t).has(t)};var ir=function(t,r){var e=tr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function or(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}or.prototype.clear=Qt,or.prototype.delete=rr,or.prototype.get=er,or.prototype.has=nr,or.prototype.set=ir;var sr=or,ur="Expected a function";function ar(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(ur);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=e.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return e.cache=o.set(i,s)||o,s};return e.cache=new(ar.Cache||sr),e}ar.Cache=sr;var cr=ar,hr=500;var lr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fr=/\\(\\)?/g,pr=(function(t){var r=cr(t,(function(t){return e.size===hr&&e.clear(),t})),e=r.cache}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(lr,(function(t,e,n,i){r.push(n?i.replace(fr,"$1"):e||t)})),r})),J?J.prototype:void 0);pr&&pr.toString;class br{constructor(t,r=U){this.value=t,I(r)&&("string"==typeof r.name&&(this.name=r.name),this.trans=!!r.trans,this.prev=r.prev,this.error=r.error,this.target=r.target)}endTrans(){this.target?this.target.endTrans(this):console.log("message has no target: ,",this)}}t.proppify(br).addProp("target",null).addProp("name","").addProp("value",null).addProp("complete",!1).addProp("prev",U).addProp("trans",!1,"boolean").addProp("error",null);class dr{constructor(t=U,r=U){this.name=t,R(r)&&(this._$value=r)}get name(){return this._name}set name(t){Y(t,"cannot initialize ValueStream with bad name"),this._name=t}get value(){return this.serialize()}set _$value(t){this._value=t}valueErrors(t=U){return R(t)?null:this.valueErrors(this.value)}get hasChildren(){return!!this._children}hasValidName(){return this.name===e(this.name)}get children(){return this.hasChildren?this._children:null}get _$children(){return this.hasChildren||(this._children=new Map),this._children}_add(t,r){Y(t,`Cannot add a child to valueStream ${this.name}-invalid name`);let e=r;if(this.has(t))throw new Error(`cannot redefine ${t} of ValueStream ${this.name}`);e instanceof dr||(e=new dr(t,r)),e.parent=this,this._$children.set(t,e)}has(t){return!!this.hasChildren&&this._children.has(t)}serialize(){if(!this.hasChildren)return this._value;const t={};return this._children.forEach((r,n)=>{if(r.hasValidName())t[n]=r.serialize();else{const i=e(n);t[i]={[n]:r.serialize()}}}),t}get $changes(){return this._changes||(this._changes=new T),this._changes}to(t=U,r=U){const e=this.makeMessage(t,r);return this._$requests.next(e),e}makeMessage(t,r=U){const e=R(r)&&B.object(r)?r:{};return new br(t,{...e,name:this.name,target:this})}get _$requests(){return this.__requests||(this.__requests=new T,this.subSet.add(this.__requests.subscribe(this._onRequest.bind(this),t=>{console.log("request submission error:",t)}))),this.__requests}_onRequest(t){t.complete?console.log("attempt to re-process a complete message",t):(t.prev=this.value,t.error=this.valueErrors(t.value)||t.error,t.complete=!0,t.error?this.errors.next(t):(R(t.value)&&(this._$value=t.value,this.$changes.next(t)),this.hasTranses?this.pendingChanges=!0:this._broadcastChange(t)))}_broadcastChange(t){this._$updater.next(t)}get errors(){return this._errors||(this._errors=new T),this._errors}get hasTranses(){return!!this._transes}get _$transes(){return this.hasTranses||(this._transes=new Set),this._transes}startTrans(){const t=this.makeMessage(U,{trans:!0});return this._$transes.add(t),this._broadcastTrans(),t}endTrans(t){this._$transes.has(t)&&(this._$transes.delete(t),this._broadcastTrans())}_broadcastTrans(){this._$transStream.next(this._$transes.size)}get _$transStream(){return this.__transStream||(this.__transStream=new x(this._$transes.size),this.subSet.add(this.__transStream.pipe((function(t){return t.lift(new P)})).subscribe(([t,r])=>{this.pendingChanges&&t&&!r&&(this.pendingChanges=!1,this._broadcastChange())}))),this.__transStream}get _$updater(){return this.__updater||(this.__updater=new x(this)),this.__updater}subscribe(t=A,r=A,e=A){r&&this.subSet.add(this.errors.subscribe(r,r));const n=this._$updater.subscribe(()=>{t(this)},r,()=>{B.function(e)&&e()});return this.subSet.add(n),n}complete(){try{Array.from(this.subSet).forEach(t=>{t.unsubscribe(),this.subSet.delete(t)})}catch(t){console.log("complete error: ",t)}}}return t.proppify(dr).addProp("pendingChanges",!1,"boolean").addProp("subSet",()=>new Set),{ValueStream:dr}}));
