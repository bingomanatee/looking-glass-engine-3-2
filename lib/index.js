!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@wonderlandlabs/propper")):"function"==typeof define&&define.amd?define(["@wonderlandlabs/propper"],r):(t=t||self).LGE=r(t.propper)}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,e)};function e(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function n(t){return"function"==typeof t}var o=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function s(t){setTimeout((function(){throw t}),0)}var u={closed:!0,next:function(t){},error:function(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},a=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var c=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),h=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e,o=this._parentOrParents,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof t)o.remove(this);else if(null!==o)for(var u=0;u<o.length;++u){o[u].remove(this)}if(n(i))try{i.call(this)}catch(t){r=t instanceof c?l(t.errors):[t]}if(a(s)){u=-1;for(var h=s.length;++u<h;){var f=s[u];if(null!==(e=f)&&"object"==typeof e)try{f.unsubscribe()}catch(t){r=r||[],t instanceof c?r=r.concat(l(t.errors)):r.push(t)}}}if(r)throw new c(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var o=e._parentOrParents;if(null===o)e._parentOrParents=this;else if(o instanceof t){if(o===this)return e;e._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return e;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function l(t){return t.reduce((function(t,r){return t.concat(r instanceof c?r.errors:r)}),[])}var f=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),p=function(t){function r(e,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=u;break;case 1:if(!e){i.destination=u;break}if("object"==typeof e){e instanceof r?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new b(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new b(i,e,n,o)}return i}return e(r,t),r.prototype[f]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(h),b=function(t){function r(r,e,o,i){var s,a=t.call(this)||this;a._parentSubscriber=r;var c=a;return n(e)?s=e:e&&(s=e.next,o=e.error,i=e.complete,e!==u&&(n((c=Object.create(e)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=o,a._complete=i,a}return e(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=i.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;s(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(p);var d=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function y(t){return t}function v(t){return 0===t.length?y:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var _=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||r||e?new p(t,r,e):new p(u)}(t,r,e);if(n?o.add(n.call(o,this.source)):o.add(this.source||i.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),i.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof p?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=g(r))((function(r,n){var o;o=e.subscribe((function(r){try{t(r)}catch(t){n(t),o&&o.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[d]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:v(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=g(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function g(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var m=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),w=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return e(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(h),S=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return e(r,t),r}(p),E=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e(r,t),r.prototype[f]=function(){return new S(this)},r.prototype.lift=function(t){var r=new j(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new m;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new m;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new m;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new m;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new m;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))},r.prototype.asObservable=function(){var t=new _;return t.source=this,t},r.create=function(t,r){return new j(t,r)},r}(_),j=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return e(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):h.EMPTY},r}(E),x=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return e(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new m;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(E);var O=function(){function t(){}return t.prototype.call=function(t,r){return r.subscribe(new T(t))},t}(),T=function(t){function r(r){var e=t.call(this,r)||this;return e.hasPrev=!1,e}return e(r,t),r.prototype._next=function(t){var r;this.hasPrev?r=[this.prev,t]:this.hasPrev=!0,this.prev=t,r&&this.destination.next(r)},r}(p);var P,A,$=function(t){return t},N=Object.prototype,V=N.hasOwnProperty,M=N.toString;
/**!
     * is
     * the definitive JavaScript type testing library
     *
     * @copyright 2013-2014 Enrico Marino / Jordan Harband
     * @license MIT
     */"function"==typeof Symbol&&(P=Symbol.prototype.valueOf),"function"==typeof BigInt&&(A=BigInt.prototype.valueOf);var z=function(t){return t!=t},k={boolean:1,number:1,string:1,undefined:1},D=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,F=/^[A-Fa-f0-9]+$/,q={};q.a=q.type=function(t,r){return typeof t===r},q.defined=function(t){return void 0!==t},q.empty=function(t){var r,e=M.call(t);if("[object Array]"===e||"[object Arguments]"===e||"[object String]"===e)return 0===t.length;if("[object Object]"===e){for(r in t)if(V.call(t,r))return!1;return!0}return!t},q.equal=function(t,r){if(t===r)return!0;var e,n=M.call(t);if(n!==M.call(r))return!1;if("[object Object]"===n){for(e in t)if(!(q.equal(t[e],r[e])&&e in r))return!1;for(e in r)if(!(q.equal(t[e],r[e])&&e in t))return!1;return!0}if("[object Array]"===n){if((e=t.length)!==r.length)return!1;for(;e--;)if(!q.equal(t[e],r[e]))return!1;return!0}return"[object Function]"===n?t.prototype===r.prototype:"[object Date]"===n&&t.getTime()===r.getTime()},q.hosted=function(t,r){var e=typeof r[t];return"object"===e?!!r[t]:!k[e]},q.instance=q.instanceof=function(t,r){return t instanceof r},q.nil=q.null=function(t){return null===t},q.undef=q.undefined=function(t){return void 0===t},q.args=q.arguments=function(t){var r="[object Arguments]"===M.call(t),e=!q.array(t)&&q.arraylike(t)&&q.object(t)&&q.fn(t.callee);return r||e},q.array=Array.isArray||function(t){return"[object Array]"===M.call(t)},q.args.empty=function(t){return q.args(t)&&0===t.length},q.array.empty=function(t){return q.array(t)&&0===t.length},q.arraylike=function(t){return!!t&&!q.bool(t)&&V.call(t,"length")&&isFinite(t.length)&&q.number(t.length)&&t.length>=0},q.bool=q.boolean=function(t){return"[object Boolean]"===M.call(t)},q.false=function(t){return q.bool(t)&&!1===Boolean(Number(t))},q.true=function(t){return q.bool(t)&&!0===Boolean(Number(t))},q.date=function(t){return"[object Date]"===M.call(t)},q.date.valid=function(t){return q.date(t)&&!isNaN(Number(t))},q.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},q.error=function(t){return"[object Error]"===M.call(t)},q.fn=q.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var r=M.call(t);return"[object Function]"===r||"[object GeneratorFunction]"===r||"[object AsyncFunction]"===r},q.number=function(t){return"[object Number]"===M.call(t)},q.infinite=function(t){return t===1/0||t===-1/0},q.decimal=function(t){return q.number(t)&&!z(t)&&!q.infinite(t)&&t%1!=0},q.divisibleBy=function(t,r){var e=q.infinite(t),n=q.infinite(r),o=q.number(t)&&!z(t)&&q.number(r)&&!z(r)&&0!==r;return e||n||o&&t%r==0},q.integer=q.int=function(t){return q.number(t)&&!z(t)&&t%1==0},q.maximum=function(t,r){if(z(t))throw new TypeError("NaN is not a valid value");if(!q.arraylike(r))throw new TypeError("second argument must be array-like");for(var e=r.length;--e>=0;)if(t<r[e])return!1;return!0},q.minimum=function(t,r){if(z(t))throw new TypeError("NaN is not a valid value");if(!q.arraylike(r))throw new TypeError("second argument must be array-like");for(var e=r.length;--e>=0;)if(t>r[e])return!1;return!0},q.nan=function(t){return!q.number(t)||t!=t},q.even=function(t){return q.infinite(t)||q.number(t)&&t==t&&t%2==0},q.odd=function(t){return q.infinite(t)||q.number(t)&&t==t&&t%2!=0},q.ge=function(t,r){if(z(t)||z(r))throw new TypeError("NaN is not a valid value");return!q.infinite(t)&&!q.infinite(r)&&t>=r},q.gt=function(t,r){if(z(t)||z(r))throw new TypeError("NaN is not a valid value");return!q.infinite(t)&&!q.infinite(r)&&t>r},q.le=function(t,r){if(z(t)||z(r))throw new TypeError("NaN is not a valid value");return!q.infinite(t)&&!q.infinite(r)&&t<=r},q.lt=function(t,r){if(z(t)||z(r))throw new TypeError("NaN is not a valid value");return!q.infinite(t)&&!q.infinite(r)&&t<r},q.within=function(t,r,e){if(z(t)||z(r)||z(e))throw new TypeError("NaN is not a valid value");if(!q.number(t)||!q.number(r)||!q.number(e))throw new TypeError("all arguments must be numbers");return q.infinite(t)||q.infinite(r)||q.infinite(e)||t>=r&&t<=e},q.object=function(t){return"[object Object]"===M.call(t)},q.primitive=function(t){return!t||!("object"==typeof t||q.object(t)||q.fn(t)||q.array(t))},q.hash=function(t){return q.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},q.regexp=function(t){return"[object RegExp]"===M.call(t)},q.string=function(t){return"[object String]"===M.call(t)},q.base64=function(t){return q.string(t)&&(!t.length||D.test(t))},q.hex=function(t){return q.string(t)&&(!t.length||F.test(t))},q.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===M.call(t)&&"symbol"==typeof P.call(t)},q.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===M.call(t)&&"bigint"==typeof A.call(t)};var H=q;const C=Symbol("ABSENT"),B=t=>t&&t!==C,R=t=>t!==C&&void 0!==t,U=t=>t!==C,I=t=>t===C;var Y=Array.isArray,Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},G="object"==typeof Z&&Z&&Z.Object===Object&&Z,L="object"==typeof self&&self&&self.Object===Object&&self,J=G||L||Function("return this")(),K=J.Symbol,Q=Object.prototype,W=Q.hasOwnProperty,X=Q.toString,tt=K?K.toStringTag:void 0;var rt=function(t){var r=W.call(t,tt),e=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var o=X.call(t);return n&&(r?t[tt]=e:delete t[tt]),o},et=Object.prototype.toString;var nt=function(t){return et.call(t)},ot="[object Null]",it="[object Undefined]",st=K?K.toStringTag:void 0;var ut=function(t){return null==t?void 0===t?it:ot:st&&st in Object(t)?rt(t):nt(t)};var at=function(t){return null!=t&&"object"==typeof t},ct="[object Symbol]";var ht=function(t){return"symbol"==typeof t||at(t)&&ut(t)==ct},lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ft=/^\w*$/;var pt=function(t,r){if(Y(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ht(t))||(ft.test(t)||!lt.test(t)||null!=r&&t in Object(r))};var bt=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},dt="[object AsyncFunction]",yt="[object Function]",vt="[object GeneratorFunction]",_t="[object Proxy]";var gt,mt=function(t){if(!bt(t))return!1;var r=ut(t);return r==yt||r==vt||r==dt||r==_t},wt=J["__core-js_shared__"],St=(gt=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||""))?"Symbol(src)_1."+gt:"";var Et=function(t){return!!St&&St in t},jt=Function.prototype.toString;var xt=function(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Ot=/^\[object .+?Constructor\]$/,Tt=Function.prototype,Pt=Object.prototype,At=Tt.toString,$t=Pt.hasOwnProperty,Nt=RegExp("^"+At.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Vt=function(t){return!(!bt(t)||Et(t))&&(mt(t)?Nt:Ot).test(xt(t))};var Mt=function(t,r){return null==t?void 0:t[r]};var zt=function(t,r){var e=Mt(t,r);return Vt(e)?e:void 0},kt=zt(Object,"create");var Dt=function(){this.__data__=kt?kt(null):{},this.size=0};var Ft=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},qt="__lodash_hash_undefined__",Ht=Object.prototype.hasOwnProperty;var Ct=function(t){var r=this.__data__;if(kt){var e=r[t];return e===qt?void 0:e}return Ht.call(r,t)?r[t]:void 0},Bt=Object.prototype.hasOwnProperty;var Rt=function(t){var r=this.__data__;return kt?void 0!==r[t]:Bt.call(r,t)},Ut="__lodash_hash_undefined__";var It=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=kt&&void 0===r?Ut:r,this};function Yt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Yt.prototype.clear=Dt,Yt.prototype.delete=Ft,Yt.prototype.get=Ct,Yt.prototype.has=Rt,Yt.prototype.set=It;var Zt=Yt;var Gt=function(){this.__data__=[],this.size=0};var Lt=function(t,r){return t===r||t!=t&&r!=r};var Jt=function(t,r){for(var e=t.length;e--;)if(Lt(t[e][0],r))return e;return-1},Kt=Array.prototype.splice;var Qt=function(t){var r=this.__data__,e=Jt(r,t);return!(e<0)&&(e==r.length-1?r.pop():Kt.call(r,e,1),--this.size,!0)};var Wt=function(t){var r=this.__data__,e=Jt(r,t);return e<0?void 0:r[e][1]};var Xt=function(t){return Jt(this.__data__,t)>-1};var tr=function(t,r){var e=this.__data__,n=Jt(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function rr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}rr.prototype.clear=Gt,rr.prototype.delete=Qt,rr.prototype.get=Wt,rr.prototype.has=Xt,rr.prototype.set=tr;var er=rr,nr=zt(J,"Map");var or=function(){this.size=0,this.__data__={hash:new Zt,map:new(nr||er),string:new Zt}};var ir=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var sr=function(t,r){var e=t.__data__;return ir(r)?e["string"==typeof r?"string":"hash"]:e.map};var ur=function(t){var r=sr(this,t).delete(t);return this.size-=r?1:0,r};var ar=function(t){return sr(this,t).get(t)};var cr=function(t){return sr(this,t).has(t)};var hr=function(t,r){var e=sr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function lr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}lr.prototype.clear=or,lr.prototype.delete=ur,lr.prototype.get=ar,lr.prototype.has=cr,lr.prototype.set=hr;var fr=lr,pr="Expected a function";function br(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(pr);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return e.cache=i.set(o,s)||i,s};return e.cache=new(br.Cache||fr),e}br.Cache=fr;var dr=br,yr=500;var vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/\\(\\)?/g,gr=function(t){var r=dr(t,(function(t){return e.size===yr&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(vr,(function(t,e,n,o){r.push(n?o.replace(_r,"$1"):e||t)})),r}));var mr=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},wr=1/0,Sr=K?K.prototype:void 0,Er=Sr?Sr.toString:void 0;var jr=function t(r){if("string"==typeof r)return r;if(Y(r))return mr(r,t)+"";if(ht(r))return Er?Er.call(r):"";var e=r+"";return"0"==e&&1/r==-wr?"-0":e};var xr=function(t){return null==t?"":jr(t)};var Or=function(t,r){return Y(t)?t:pt(t,r)?[t]:gr(xr(t))},Tr=1/0;var Pr=function(t){if("string"==typeof t||ht(t))return t;var r=t+"";return"0"==r&&1/t==-Tr?"-0":r};var Ar=function(t,r){for(var e=0,n=(r=Or(r,t)).length;null!=t&&e<n;)t=t[Pr(r[e++])];return e&&e==n?t:void 0};var $r=function(t,r,e){var n=null==t?void 0:Ar(t,r);return void 0===n?e:n},Nr=function(){try{var t=zt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Vr=function(t,r,e){"__proto__"==r&&Nr?Nr(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},Mr=Object.prototype.hasOwnProperty;var zr=function(t,r,e){var n=t[r];Mr.call(t,r)&&Lt(n,e)&&(void 0!==e||r in t)||Vr(t,r,e)},kr=9007199254740991,Dr=/^(?:0|[1-9]\d*)$/;var Fr=function(t,r){var e=typeof t;return!!(r=null==r?kr:r)&&("number"==e||"symbol"!=e&&Dr.test(t))&&t>-1&&t%1==0&&t<r};var qr=function(t,r,e,n){if(!bt(t))return t;for(var o=-1,i=(r=Or(r,t)).length,s=i-1,u=t;null!=u&&++o<i;){var a=Pr(r[o]),c=e;if(o!=s){var h=u[a];void 0===(c=n?n(h,a,u):void 0)&&(c=bt(h)?h:Fr(r[o+1])?[]:{})}zr(u,a,c),u=u[a]}return t};var Hr=function(t,r,e){for(var n=-1,o=r.length,i={};++n<o;){var s=r[n],u=Ar(t,s);e(u,s)&&qr(i,Or(s,t),u)}return i};var Cr=function(t,r){return null!=t&&r in Object(t)},Br="[object Arguments]";var Rr=function(t){return at(t)&&ut(t)==Br},Ur=Object.prototype,Ir=Ur.hasOwnProperty,Yr=Ur.propertyIsEnumerable,Zr=Rr(function(){return arguments}())?Rr:function(t){return at(t)&&Ir.call(t,"callee")&&!Yr.call(t,"callee")},Gr=9007199254740991;var Lr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Gr};var Jr=function(t,r,e){for(var n=-1,o=(r=Or(r,t)).length,i=!1;++n<o;){var s=Pr(r[n]);if(!(i=null!=t&&e(t,s)))break;t=t[s]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&Lr(o)&&Fr(s,o)&&(Y(t)||Zr(t))};var Kr=function(t,r){return null!=t&&Jr(t,r,Cr)};var Qr=function(t,r){return Hr(t,r,(function(r,e){return Kr(t,e)}))};var Wr=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},Xr=K?K.isConcatSpreadable:void 0;var te=function(t){return Y(t)||Zr(t)||!!(Xr&&t&&t[Xr])};var re=function t(r,e,n,o,i){var s=-1,u=r.length;for(n||(n=te),i||(i=[]);++s<u;){var a=r[s];e>0&&n(a)?e>1?t(a,e-1,n,o,i):Wr(i,a):o||(i[i.length]=a)}return i};var ee=function(t){return(null==t?0:t.length)?re(t,1):[]};var ne=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},oe=Math.max;var ie=function(t,r,e){return r=oe(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=oe(n.length-r,0),s=Array(i);++o<i;)s[o]=n[r+o];o=-1;for(var u=Array(r+1);++o<r;)u[o]=n[o];return u[r]=e(s),ne(t,this,u)}};var se=function(t){return function(){return t}},ue=Nr?function(t,r){return Nr(t,"toString",{configurable:!0,enumerable:!1,value:se(r),writable:!0})}:$,ae=800,ce=16,he=Date.now;var le=function(t){var r=0,e=0;return function(){var n=he(),o=ce-(n-e);if(e=n,o>0){if(++r>=ae)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(ue);var fe=function(t){return le(ie(t,void 0,ee),t+"")}((function(t,r){return null==t?{}:Qr(t,r)}));class pe{constructor(t,r=C){this.value=t,R(r)&&("string"==typeof r.name&&(this.name=r.name),this.trans=!!r.trans,this.prev=r.prev,this.error=r.error,this.target=r.target)}endTrans(){this.target?this.target.endTrans(this):console.log("message has no target: ,",this)}toJSON(){const t=fe(this,"target,name,value,complete,prev,trans,error".split(","));return"object"==typeof t.target&&t.target.name&&(t.target=t.target.name),t}}t.proppify(pe).addProp("target",null).addProp("name","").addProp("value",null).addProp("complete",!1).addProp("prev",C).addProp("trans",!1,"boolean").addProp("error",null);var be=1/0;var de=function(t){return(null==t?0:t.length)?re(t,be):[]};function ye(t,r="invalid ValueStream name"){if(!t||!R(t)||!H.string(t)&&!H.number(t)){const e=new Error(r);throw U(t)?e.name=t:e.name=void 0,e}}class ve{constructor(t=C,r=C,e=C){this.name=t,U(r)&&this._setValue(r),B(e)&&(this.filter=e)}get name(){return this._name}set name(t){ye(t,"cannot initialize ValueStream with bad name"),this._name=t}hasValidName(){try{return ye(this.name),!0}catch(t){return!1}}get value(){return this._value}_setValue(t){let r=this.validate(t,!0);if(r){Array.isArray(r)&&(r=r.join(", "));const t=new Error(`attempt to set ${this.name}to bad value`);throw t.errors=r,t}this._value=t}validate(t=C,r=!1){if(I(t))return I(this.value)?null:this.validate(this.value);try{if(!B(this.filter)||I(t))return!1;const e=de([this.filter]).reduce((r,e)=>{const n=this._validateFilter(e,t,r);return n?[...r,n]:r},[]);if(!r)return e;if(!e.length)return!1;if(1===e.length)return e.pop()}catch(t){console.log("error validating type:",t)}return!1}_validateFilter(t,r,e){return H.function(t)?t(r,e,this):H[t]?!H[t](r)&&`${this.name} must be a ${t}`:`cannot parse type ${t}`}}t.proppify(ve).addProp("filter",C);class _e extends ve{constructor(t=C,r=C,e=C){super(t,r,e)}get $changes(){return this._changes||(this._changes=new E),this._changes}next(...t){const r=this.makeMessage(...t);return this._$requests.next(r),r}makeMessage(t=C,r=C){const e=U(r)&&H.object(r)?r:{};return new pe(t,{...e,name:this.name,target:this})}get _$requests(){return this.__requests||(this.__requests=new E,this.subSet.add(this.__requests.subscribe(this._onRequest.bind(this),t=>{console.log("request submission error:",t)}))),this.__requests}_onRequest(t){if(t.complete)return console.log("attempt next re-process a complete message",t),t;if(t.prev=this.value,I(t.value))return t;try{this._setValue(t.value)}catch({message:r,errors:e}){t.error=e||r,this.errors.next(t)}return t.error?t:(this.$changes.next(t),this.hasTranses?this.pendingChanges=!0:this._broadcastChange(t),t)}_broadcastChange(t){this._$updater.next(t)}get errors(){return this._errors||(this._errors=new E),this._errors}get hasTranses(){return!!this._transes}get _$transes(){return this.hasTranses||(this._transes=new Set),this._transes}startTrans(){const t=this.makeMessage(C,{trans:!0});return this._$transes.add(t),this._broadcastTrans(),t}endTrans(t){this._$transes.has(t)&&(this._$transes.delete(t),this._broadcastTrans())}_broadcastTrans(){this._$transStream.next(this._$transes.size)}get _$transStream(){return this.__transStream||(this.__transStream=new x(this._$transes.size),this.subSet.add(this.__transStream.pipe((function(t){return t.lift(new O)})).subscribe(([t,r])=>{this.pendingChanges&&t&&!r&&(this.pendingChanges=!1,this._broadcastChange())}))),this.__transStream}get _$updater(){return this.__updater||(this.__updater=new x(this)),this.__updater}subscribe(t=$,r=$,e=$){r&&this.subSet.add(this.errors.subscribe(r,r));const n=this._$updater.subscribe(()=>{t(this)},r,e);return this.subSet.add(n),n}complete(){try{Array.from(this.subSet).forEach(t=>{t.unsubscribe(),this.subSet.delete(t)})}catch(t){console.log("complete error: ",t)}}}t.proppify(_e).addProp("pendingChanges",!1,"boolean").addProp("subSet",()=>new Set);var ge=function(t,r,e){var n=-1,o=t.length;r<0&&(r=-r>o?0:o+r),(e=e>o?o:e)<0&&(e+=o),o=r>e?0:e-r>>>0,r>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+r];return i};var me=function(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:ge(t,r,e)},we=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Se=function(t){return we.test(t)};var Ee=function(t){return t.split("")},je="[\\ud800-\\udfff]",xe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Oe="\\ud83c[\\udffb-\\udfff]",Te="[^\\ud800-\\udfff]",Pe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ae="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="(?:"+xe+"|"+Oe+")"+"?",Ne="[\\ufe0e\\ufe0f]?"+$e+("(?:\\u200d(?:"+[Te,Pe,Ae].join("|")+")[\\ufe0e\\ufe0f]?"+$e+")*"),Ve="(?:"+[Te+xe+"?",xe,Pe,Ae,je].join("|")+")",Me=RegExp(Oe+"(?="+Oe+")|"+Ve+Ne,"g");var ze=function(t){return t.match(Me)||[]};var ke=function(t){return Se(t)?ze(t):Ee(t)};var De=function(t){return function(r){r=xr(r);var e=Se(r)?ke(r):void 0,n=e?e[0]:r.charAt(0),o=e?me(e,1).join(""):r.slice(1);return n[t]()+o}}("toUpperCase");const Fe="undefined"!=typeof Proxy;class qe extends _e{constructor(t,r=C,e=C){super(t,new Map),B(r)&&H.object(r)&&this._initValues(r),B(e)&&H.object(e)&&this._initMethods(e)}_initMethods(t){Object.keys(t).forEach(r=>{const e=t[r];Array.isArray(e)?this.addMethod(r,...e):this.addMethod(r,e)})}_initValues(t){Object.keys(t).forEach(r=>{const e=t[r];Array.isArray(e)?this.addStream(r,...e):this.addStream(r,e)})}setFilter(t,r){return this.streams[t].filter=r,this}_updateStreamValue(t,r){this.streams.get(t).next(r)}get value(){return this._genValue()}get my(){return Fe?(this._valueProxy||(this._valueProxy=this._genValueProxy()),this._valueProxy):this._genValue()}_genValueProxy(){const t=this;return new Proxy({},{get(r,e){const n=t.streams.get(e);if(n)return n.value}})}_genValue(){const t={};return this.streams.forEach(r=>t[r.name]=r.value),t}property(...t){return this.addStream(...t)}addStream(t,r=C,e=C){if(this.streams.has(t))throw new Error(`${this.name}: cannot redefine property ${t}`);const n=new _e(t,r,e);return this.subSet.add(n.subscribe(()=>{this.next(this.value)},t=>{t instanceof pe&&(t=t.toJSON()),this.errors.next({store:this.name,source:n.name,error:t})})),this.streams.set(t,n),delete this._propSetters,Fe||delete this._do,this}method(...t){return this.addMethod(...t)}addMethod(t,r,e=C){let n=!1,o=!1,i=!1;if(B(e)&&H.object(e)&&(n=$r(e,"bind",!1),o=$r(e,"trans",!1),i=$r(e,"throw",!1)),this.methods.has(t))throw new Error(`${this.name}: cannot redefine method ${t}`);const s=n?r.bind(this):(...t)=>r(this,...t);return i?this.methods.set(t,(...t)=>o?this.throwTrans(s,...t):this.throwable(s,...t)):this.methods.set(t,(...t)=>o?this.tryTrans(s,...t):this.try(s,...t)),this}tryTrans(t,...r){const e=this.startTrans(),n=this.try(t,...r);return e.endTrans(),n}try(t,...r){let e;try{e=t(...r)}catch(t){this.errors.next(t)}return e}throwable(t,...r){let e=!1;const n=this.subscribe(()=>{},t=>{throw e=t,t});try{const e=t(...r);return n.unsubscribe(),e}catch(t){throw n.unsubscribe(),t!==e&&this.errors.next(t),t}}throwTrans(t,...r){let e=!1;const n=this.startTrans(),o=this.subscribe(()=>{},t=>{throw e=t,t});this.value;try{const e=t(...r);return o.unsubscribe(),n.endTrans(),e}catch(t){throw o.unsubscribe(),n.endTrans(),t!==e&&this.errors.next(t),t}}get do(){return this._do||(console.log("hasProxy",Fe),this._do=Fe?this._genDoProxy():this._genDo(),console.log("set _do as  -- ",this._do)),this._do}get propSetters(){return this._propSetters||(this._propSetters={},this.streams.forEach(t=>{const r=`set${De(t.name)}`;this.propSetters[r]=r=>this.try(()=>t.next(r))})),this._propSetters}_genDoProxy(){const t=this;return new Proxy({},{get:(r,e)=>t.propSetters[e]?t.propSetters[e]:t.methods.get(e)})}_genDo(){const t={...this.propSetters};return this.methods.forEach((r,e)=>{t[e]=r}),t}}return t.proppify(qe).addProp("methods",()=>new Map).addProp("streams",()=>new Map),{ValueStream:_e,Value:ve,ValueStore:qe}}));
